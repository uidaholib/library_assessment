<!DOCTYPE html><html><head><meta charset=utf-8><title>Library Assessment</title><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons" rel=stylesheet type=text/css><link href=https://unpkg.com/vuetify/dist/vuetify.min.css rel=stylesheet type=text/css><link rel=stylesheet href=https://js.arcgis.com/3.20compact/dijit/themes/claro/claro.css><script src=https://js.arcgis.com/3.20compact/ ></script><script>require([
      "esri/arcgis/Portal", "esri/arcgis/OAuthInfo", "esri/IdentityManager",
      "dojo/dom-style", "dojo/dom-attr", "dojo/dom", "dojo/on", "dojo/_base/array",
      "dojo/domReady!"
    ], function (arcgisPortal, OAuthInfo, esriId,
      domStyle, domAttr, dom, on, arrayUtils) {
      var info = new OAuthInfo({
        appId: "q244Lb8gDRgWQ8hM",
        // Uncomment the next line and update if using your own portal
        portalUrl: "http://uidaho.maps.arcgis.com",
        // Uncomment the next line to prevent the user's signed in state from being shared
        // with other apps on the same domain with the same authNamespace value.
        authNamespace: "portal_oauth_inline",
        popup: true
      });
      esriId.registerOAuthInfos([info]);

      esriId.checkSignInStatus(info.portalUrl + "/sharing").then(
        function () {
          displayItems();
        }
      ).otherwise(
        function () {
          // Anonymous view
          console.log('error checking sign in');
        }
      );

      window.esriSiginIn = function(){
        esriId.getCredential(info.portalUrl + "/sharing");
      }

      window.esriSignOut = function () {
        esriId.destroyCredentials();
        window.location.reload();

      }

      function displayItems() {
        new arcgisPortal.Portal(info.portalUrl).signIn().then(
          function (portalUser) {
            console.log('Signed in to the portal: ', portalUser);
            queryPortal(portalUser);
          }
        ).otherwise(
          function (error) {
            console.log('Error occurred while signing in: ', error);
          }
        );
      }

      function queryPortal(portalUser) {
        var portal = portalUser.portal;

        //See list of valid item types here:  http://www.arcgis.com/apidocs/rest/index.html?itemtypes.html
        //See search reference here:  http://www.arcgis.com/apidocs/rest/index.html?searchreference.html
        var queryParams = {
          q: 'owner:' + portalUser.username,
          sortField: "numViews",
          sortOrder: "desc",
          num: 20
        };

        portal.queryItems(queryParams).then(function(data){
          console.log('query data: ', data)
        });
      }
    });</script><link href=/static/css/app.f36d75c70cdbe2057c4a7d3727d03f16.css rel=stylesheet></head><body><div id=app></div><script type=text/javascript src=/static/js/manifest.e9a1cfe0a006643d7707.js></script><script type=text/javascript src=/static/js/vendor.4bd31a10f4b9334c297c.js></script><script type=text/javascript src=/static/js/app.dd99b18e315ae1b989cf.js></script></body></html>